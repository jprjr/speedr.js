var BaseMap,isArray,isFunction,isObjectLit,speedr,toArrayPairs,extend=function(t,e){for(var i in e){if(hasProp.call(e,i))t[i]=e[i]}function r(){this.constructor=t}r.prototype=e.prototype;t.prototype=new r;t.__super__=e.prototype;return t},hasProp={}.hasOwnProperty,slice=[].slice;speedr={};isArray=Array.isArray||function(t){return toString.call(t)==="[object Array]"};isFunction=function(t){return toString.call(t)==="[object Function]"};isObjectLit=function(t){if(isArray(t)||isFunction(t)){return false}return t===Object(t)};toArrayPairs=function(t){var e,i,r;i=[];for(e in t){r=t[e];i[i.length]=[e,r]}return i};speedr.binarySearch=function(t,e,i){var r,s,n;if(i==null){i=false}r=t.length;s=-1;while(r-s>1){if(t[n=r+s>>1]>e){s=n}else{r=n}}if(i){if(t[r]===e){return r}else{return-1}}else{return r}};BaseMap=function(){function t(){}t.prototype.updateLength=function(){this.length=this.keys.length;return this.length};t.prototype.each=function(t,e,i,r){var s,n,l,u,h,o,a;if(e==null){e=0}if(i==null){i=this.length}if(r==null){r=1}for(s=l=u=e,h=i,o=r;o>0?l<h:l>h;s=l+=o){n=this.iterKey(s);a=this.iterVal(s);t(n,a)}return null};t.prototype.eachKey=function(t,e,i,r){var s,n,l,u,h;if(e==null){e=0}if(i==null){i=this.length}if(r==null){r=1}for(s=n=l=e,u=i,h=r;h>0?n<u:n>u;s=n+=h){t(this.iterKey(s))}return null};t.prototype.eachVal=function(t,e,i,r){var s,n,l,u,h;if(e==null){e=0}if(i==null){i=this.length}if(r==null){r=1}for(s=n=l=e,u=i,h=r;h>0?n<u:n>u;s=n+=h){t(this.iterVal(s))}return null};return t}();speedr.Map=function(t){extend(e,t);function e(){var t;t=1<=arguments.length?slice.call(arguments,0):[];this.keys=[];this.revKeys={};this.items={};this.set.apply(this,t);this.updateLength()}e.prototype.get=function(t){if(t==null){return null}return this.items[t]};e.prototype.set=function(){var t,e,i,r,s,n;e=1<=arguments.length?slice.call(arguments,0):[];if(e[0]==null){return this.length}if(isObjectLit(e[0])){e=toArrayPairs(e[0])}for(s=0,r=e.length;s<r;s++){t=e[s];if(!isArray(t)){throw"Attempted set of invalid item."}i=t[0];n=t[1];if(this.items[i]==null){this.revKeys[i]=this.keys.length;this.keys[this.keys.length]=i}this.items[i]=n}return this.updateLength()};e.prototype.remove=function(t){if(t==null){return this.length}if(this.items[t]!=null){delete this.items[t];this.keys.splice(this.revKeys[t],1);delete this.revKeys[t]}return this.updateLength()};e.prototype.iter=function(t){return[this.keys[t],this.items[this.keys[t]]]};e.prototype.iterKey=function(t){return this.keys[t]};e.prototype.iterVal=function(t){return this.items[this.keys[t]]};e.prototype.hasKey=function(t){return this.items[t]!=null};e.prototype.clear=function(){this.items={};this.revKeys={};this.keys=[];this.updateLength();return null};return e}(BaseMap);speedr.SortedMap=function(t){extend(e,t);function e(){var t;t=1<=arguments.length?slice.call(arguments,0):[];this.keys=[];this.vals=[];this.set.apply(this,t);this.updateLength()}e.prototype.get=function(t){var e;if(t==null){return null}e=speedr.binarySearch(this.keys,t,true);if(e===-1){return null}return this.vals[e]};e.prototype.set=function(){var t,e,i,r,s,n,l;i=1<=arguments.length?slice.call(arguments,0):[];if(i[0]==null){return this.length}if(isObjectLit(i[0])){i=toArrayPairs(i[0])}for(n=0,s=i.length;n<s;n++){e=i[n];if(!isArray(e)){throw"Attempted set of invalid item."}r=e[0];l=e[1];t=speedr.binarySearch(this.keys,r);if(this.keys[t]===r){this.vals[t]=l}else{this.keys.splice(t,0,r);this.vals.splice(t,0,l)}}return this.updateLength()};e.prototype.remove=function(t){var e;if(t==null){return this.length}e=speedr.binarySearch(this.keys,t);this.keys.splice(e,1);this.vals.splice(e,1);return this.updateLength()};e.prototype.pop=function(){this.keys.pop();this.vals.pop();return this.updateLength()};e.prototype.shift=function(){this.keys.shift();this.vals.shift();return this.updateLength()};e.prototype.iter=function(t){return[this.keys[this.length-1-t],this.vals[this.length-1-t]]};e.prototype.iterKey=function(t){return this.keys[this.length-1-t]};e.prototype.iterVal=function(t){return this.vals[this.length-1-t]};e.prototype.hasKey=function(t){if(speedr.binarySearch(this.keys,t,true)===-1){return false}else{return true}};e.prototype.clear=function(){this.keys=[];this.vals=[];this.updateLength();return null};return e}(BaseMap);speedr.SortedMultiMap=function(t){extend(e,t);function e(){var t;t=1<=arguments.length?slice.call(arguments,0):[];this.keys=[];this.vals=[];this.insert.apply(this,t);this.updateLength()}e.prototype.get=function(){return null};e.prototype.set=function(){return null};e.prototype.insert=function(){var t,e,i,r,s,n,l;i=1<=arguments.length?slice.call(arguments,0):[];if(i[0]==null){return this.length}if(isObjectLit(i[0])){i=toArrayPairs(i[0])}for(n=0,s=i.length;n<s;n++){e=i[n];if(!isArray(e)){throw"Attempted insert of invalid item."}r=e[0];l=e[1];t=speedr.binarySearch(this.keys,r);this.keys.splice(t,0,r);this.vals.splice(t,0,l)}return this.updateLength()};e.prototype.remove=function(t,e){var i,r;if(t==null){return this.length}i=speedr.binarySearch(this.keys,t);if(e!=null){r=i-1;while(true){if(e===this.vals[i]){break}if(e===this.vals[r]){i=r;break}i++;r--}}this.keys.splice(i,1);this.vals.splice(i,1);return this.updateLength()};return e}(speedr.SortedMap);if(typeof module!=="undefined"&&module!==null&&(typeof exports!=="undefined"&&exports!==null)){module.exports=speedr}else{window.speedr=speedr}