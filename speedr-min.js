var BaseMap,isArray,isFunction,isObjectLit,speedr,toArrayPairs,extend=function(t,e){for(var r in e){if(hasProp.call(e,r))t[r]=e[r]}function i(){this.constructor=t}i.prototype=e.prototype;t.prototype=new i;t.__super__=e.prototype;return t},hasProp={}.hasOwnProperty,slice=[].slice;speedr={};isArray=Array.isArray||function(t){return toString.call(t)==="[object Array]"};isFunction=function(t){return toString.call(t)==="[object Function]"};isObjectLit=function(t){if(isArray(t)||isFunction(t)){return false}return t===Object(t)};toArrayPairs=function(t){var e,r,i;r=[];for(e in t){i=t[e];r[r.length]=[e,i]}return r};speedr.binarySearch=function(t,e,r){var i,n,s;if(r==null){r=false}i=t.length;n=-1;while(i-n>1){if(t[s=i+n>>1]>e){n=s}else{i=s}}if(r){if(t[i]===e){return i}else{return-1}}else{return i}};BaseMap=function(){function t(){}t.prototype.updateLength=function(){this.length=this.keys.length;return this.length};t.prototype.each=function(t,e,r,i){var n,s,l,u,h,o,a;if(e==null){e=0}if(r==null){r=this.length}if(i==null){i=1}for(n=l=u=e,h=r,o=i;o>0?l<h:l>h;n=l+=o){s=this.iterKey(n);a=this.iterVal(n);t(s,a)}return null};t.prototype.eachKey=function(t,e,r,i){var n,s,l,u,h;if(e==null){e=0}if(r==null){r=this.length}if(i==null){i=1}for(n=s=l=e,u=r,h=i;h>0?s<u:s>u;n=s+=h){t(this.iterKey(n))}return null};t.prototype.eachVal=function(t,e,r,i){var n,s,l,u,h;if(e==null){e=0}if(r==null){r=this.length}if(i==null){i=1}for(n=s=l=e,u=r,h=i;h>0?s<u:s>u;n=s+=h){t(this.iterVal(n))}return null};return t}();speedr.Map=function(t){extend(e,t);function e(){var t;t=1<=arguments.length?slice.call(arguments,0):[];this.keys=[];this.revKeys={};this.items={};this.set.apply(this,t);this.updateLength()}e.prototype.get=function(t){if(t==null){return null}return this.items[t]};e.prototype.set=function(){var t,e,r,i,n,s;e=1<=arguments.length?slice.call(arguments,0):[];if(e[0]==null){return this.length}if(isObjectLit(e[0])){e=toArrayPairs(e[0])}for(n=0,i=e.length;n<i;n++){t=e[n];if(!isArray(t)){throw"Attempted set of invalid item."}r=t[0];s=t[1];if(this.items[r]==null){this.revKeys[r]=this.keys.length;this.keys[this.keys.length]=r}this.items[r]=s}return this.updateLength()};e.prototype.remove=function(t){if(t==null){return this.length}if(this.items[t]!=null){delete this.items[t];this.keys.splice(this.revKeys[t],1);delete this.revKeys[t]}return this.updateLength()};e.prototype.iter=function(t){return[this.keys[t],this.items[this.keys[t]]]};e.prototype.iterKey=function(t){return this.keys[t]};e.prototype.iterVal=function(t){return this.items[this.keys[t]]};e.prototype.hasKey=function(t){return this.items[t]!=null};e.prototype.clear=function(){this.items={};this.revKeys={};this.keys=[];this.updateLength();return null};return e}(BaseMap);speedr.SortedMap=function(t){extend(e,t);function e(){var t;t=1<=arguments.length?slice.call(arguments,0):[];this.keys=[];this.vals=[];this.set.apply(this,t);this.updateLength()}e.prototype.get=function(t){var e;if(t==null){return null}e=speedr.binarySearch(this.keys,t,true);if(e===-1){return null}return this.vals[e]};e.prototype.set=function(){var t,e,r,i,n,s,l;r=1<=arguments.length?slice.call(arguments,0):[];if(r[0]==null){return this.length}if(isObjectLit(r[0])){r=toArrayPairs(r[0])}for(s=0,n=r.length;s<n;s++){e=r[s];if(!isArray(e)){throw"Attempted set of invalid item."}i=e[0];l=e[1];t=speedr.binarySearch(this.keys,i);if(this.keys[t]===i){this.vals[t]=l}else{this.keys.splice(t,0,i);this.vals.splice(t,0,l)}}return this.updateLength()};e.prototype.remove=function(t){var e;if(t==null){return this.length}e=speedr.binarySearch(this.keys,t);this.keys.splice(e,1);this.vals.splice(e,1);return this.updateLength()};e.prototype.removeAt=function(t){this.keys.splice(t,1);this.vals.splice(t,1);return this.updateLength()};e.prototype.pop=function(){this.keys.pop();this.vals.pop();return this.updateLength()};e.prototype.iter=function(t){return[this.keys[this.length-1-t],this.vals[this.length-1-t]]};e.prototype.iterKey=function(t){return this.keys[this.length-1-t]};e.prototype.iterVal=function(t){return this.vals[this.length-1-t]};e.prototype.hasKey=function(t){if(speedr.binarySearch(this.keys,t,true)===-1){return false}else{return true}};e.prototype.clear=function(){this.keys=[];this.vals=[];this.updateLength();return null};return e}(BaseMap);speedr.SortedMultiMap=function(t){extend(e,t);function e(){var t;t=1<=arguments.length?slice.call(arguments,0):[];this.keys=[];this.vals=[];this.insert.apply(this,t);this.updateLength()}e.prototype.get=function(){return null};e.prototype.set=function(){return null};e.prototype.insert=function(){var t,e,r,i,n,s,l;r=1<=arguments.length?slice.call(arguments,0):[];if(r[0]==null){return this.length}if(isObjectLit(r[0])){r=toArrayPairs(r[0])}for(s=0,n=r.length;s<n;s++){e=r[s];if(!isArray(e)){throw"Attempted insert of invalid item."}i=e[0];l=e[1];t=speedr.binarySearch(this.keys,i);this.keys.splice(t,0,i);this.vals.splice(t,0,l)}return this.updateLength()};e.prototype.remove=function(t,e){var r,i;if(t==null){return this.length}r=speedr.binarySearch(this.keys,t);if(e!=null){i=r-1;while(true){if(e===this.vals[r]){break}if(e===this.vals[i]){r=i;break}r++;i--}}this.keys.splice(r,1);this.vals.splice(r,1);return this.updateLength()};return e}(speedr.SortedMap);if(typeof module!=="undefined"&&module!==null&&(typeof exports!=="undefined"&&exports!==null)){module.exports=speedr}else{window.speedr=speedr}